global.webpackJsonp([2],{"9rBC":function(t,e,i){"use strict";var a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ripple-wrapper",class:this.classes,attrs:{id:"ripple-wrapper-"+this.id,eventid:"0"},on:{click:this.handleClick}},[this._t("default",null,{mpcomid:"0"}),this._v(" "),e("div",{staticClass:"ripple-content",style:this.style})],2)},staticRenderFns:[]};e.a=a},"AIn+":function(t,e,i){"use strict";var a=i("m49J"),s=i("rG9a");var n=function(t){i("b4+q")},r=i("ybqe")(a.a,s.a,n,"data-v-7fa1a2a4",null);e.a=r.exports},JgoM:function(t,e,i){"use strict";var a=i("j/Lz"),s=i("9rBC");var n=function(t){i("PjmH")},r=i("ybqe")(a.a,s.a,n,null,null);e.a=r.exports},LlDP:function(t,e,i){"use strict";var a=i("l95G"),s=i("uC6Q");var n=function(t){i("OV6e")},r=i("ybqe")(a.a,s.a,n,null,null);e.a=r.exports},NUoO:function(t,e,i){"use strict";var a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"photo-container"},[i("div",{staticClass:"photo"},[i("img",{staticClass:"photo-content",attrs:{src:t.photo.photo_url,mode:"aspectFill",eventid:"0"},on:{click:t.previewImage}}),t._v(" "),i("div",{staticClass:"fab-container",attrs:{"hover-class":"none",eventid:"1"},on:{click:t.navigate,longpress:t.showActionSheet}},[i("fab",{attrs:{icon:"/static/icons/edit_white.png",mpcomid:"0"}})],1)]),t._v(" "),i("div",{staticClass:"cells"},[t._m(0),t._v(" "),i("div",{staticClass:"content",class:{"-empty":!t.photo.location}},[t._v(t._s(t.photo.location||"未设置"))]),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"content",class:{"-empty":!t.photo.description}},[t._v(t._s(t.photo.description||"未设置"))])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("img",{staticClass:"icon",attrs:{src:"/static/icons/locate.png"}}),this._v(" "),e("span",[this._v("地址")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("img",{staticClass:"icon",attrs:{src:"/static/icons/description.png"}}),this._v(" "),e("span",[this._v("简介")])])}]};e.a=a},OV6e:function(t,e){},PjmH:function(t,e){},QauZ:function(t,e,i){"use strict";var a=i("Xxa5"),s=i.n(a),n=i("exGp"),r=i.n(n),o=i("Dd8w"),c=i.n(o),l=i("wuJz"),h=(i.n(l),i("NYxO")),u=i("5ybJ"),d=i("IcnI"),p=i("ZoQJ");e.a={props:{photo:{type:Object,required:!0}},components:{fab:u.a},store:d.a,methods:c()({},i.i(h.b)(["updatePhotoMeta","updatePhotoImage"]),i.i(h.e)(["clearEditing"]),{previewImage:function(){wx.previewImage({current:this.photo.photo_url,urls:[this.photo.photo_url]})},navigate:function(){i.i(p.e)("/pages/photo-edit/main?id="+this.photo.id)},showActionSheet:function(){var t=this;return r()(s.a.mark(function e(){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.i(l.isToday)(t.photo.created_at)?i.i(p.f)("重新定位","替换照片"):i.i(p.f)("重新定位"),e.next=3,a;case 3:e.t0=e.sent,e.next=0===e.t0?6:1===e.t0?17:27;break;case 6:return e.t1=t,e.t2=t.photo.id,e.t3=t.photo.description,e.next=11,i.i(p.j)();case 11:return e.t4=e.sent,e.t5={id:e.t2,description:e.t3,location:e.t4},e.next=15,e.t1.updatePhotoMeta.call(e.t1,e.t5);case 15:return t.clearEditing(),e.abrupt("break",28);case 17:return e.t6=t,e.t7=t.photo.id,e.next=21,i.i(p.k)();case 21:return e.t8=e.sent,e.t9={id:e.t7,path:e.t8},e.next=25,e.t6.updatePhotoImage.call(e.t6,e.t9);case 25:return t.clearEditing(),e.abrupt("break",28);case 27:return e.abrupt("break",28);case 28:case"end":return e.stop()}},e,t)}))()}})}},"b4+q":function(t,e){},"j/Lz":function(t,e,i){"use strict";var a=i("fZjL"),s=i.n(a),n=1;e.a={name:"ripple",props:{duration:{type:Number,default:1e3},rippleClass:String,type:{type:String,default:"fill",validator:function(t){return-1!==["fill","circle"].indexOf(t)}}},data:function(){return{style:"",timer:null,wrapperX:0,wrapperY:0,id:n}},computed:{classes:function(){var t=[];return this.rippleClass&&t.push(this.rippleClass),t.push("ripple-wrapper-"+this.type),t.join(" ")}},created:function(){n++;var t=wx.getSystemInfoSync();this.pRpx=750/t.screenWidth},mounted:function(){var t=this,e=wx.createSelectorQuery();setTimeout(function(){e.select("#ripple-wrapper-"+t.id).boundingClientRect(function(e){t.wrapperX=e.left,t.wrapperY=e.top}).exec()},200)},methods:{handleClick:function(t){var e=this;this.timer&&(clearTimeout(this.timer),this.timer=null,this.style=""),this.$nextTick(function(){var i=t.x,a=t.y,n={left:(i-e.wrapperX)*e.pRpx-40+"rpx",top:(a-e.wrapperY)*e.pRpx-40+"rpx",animation:"ripple-"+e.type+" "+e.duration/1e3+"s cubic-bezier(0, 0, 0.2, 1)"},r="";s()(n).forEach(function(t){r+=t+": "+n[t]+";"}),e.style=r,e.timer=setTimeout(function(){e.style=""},e.duration)})}}}},jkNd:function(t,e,i){"use strict";var a=i("QauZ"),s=i("NUoO");var n=function(t){i("tDOj")},r=i("ybqe")(a.a,s.a,n,"data-v-1841ece6",null);e.a=r.exports},l95G:function(t,e,i){"use strict";var a=i("Dd8w"),s=i.n(a),n=i("wuJz"),r=(i.n(n),i("JgoM")),o=i("NYxO"),c=i("jkNd"),l=i("IcnI"),h=i("AIn+"),u=i("rsye");e.a={components:{bigImage:u.a,ripple:r.a,photo:c.a,calendar:h.a},store:l.a,data:function(){return{showCalendar:!1,startPageX:0}},computed:s()({},i.i(o.d)(["selectedDate","firstMonthInTimeline"]),i.i(o.a)({date:function(t){return t.timeline.selected.date},photo:function(t){return t.timeline.selected.photo}}),{reachTheStart:function(){return i.i(n.isSameDay)(this.date,this.firstMonthInTimeline)},reachTheEnd:function(){return i.i(n.isToday)(this.date)}}),methods:s()({},i.i(o.e)(["setSelectedDate"]),{next:function(){this.reachTheEnd||this.setSelectedDate(i.i(n.addDays)(this.date,1))},prior:function(){this.reachTheStart||this.setSelectedDate(i.i(n.subDays)(this.date,1))},touchStart:function(t){this.startPageX=t.mp.changedTouches[0].pageX},touchEnd:function(t){var e=this.startPageX-t.mp.changedTouches[0].pageX;e>50?this.next():e<-50&&this.prior()}})}},m49J:function(t,e,i){"use strict";var a=i("Dd8w"),s=i.n(a),n=i("wuJz"),r=(i.n(n),i("NYxO")),o=i("IcnI");e.a={data:function(){return{show:new Date,startPageX:0}},store:o.a,computed:s()({},i.i(r.a)({photos:function(t){return t.timeline.photos},selected:function(t){return t.timeline.selected.date}}),i.i(r.d)(["firstMonthInTimeline"]),{title:function(){return i.i(n.format)(this.show,"YYYY 年 M 月")},dayChunks:function(){for(var t=this,e=i.i(n.eachDay)(this.startOfCalendar,this.endOfCalendar).map(function(e){return{date:e.getDate(),day:e,photo:t.photos.find(function(t){return i.i(n.isSameDay)(t.created_at,e)}),isSelect:i.i(n.isSameDay)(t.selected,e),isToday:i.i(n.isToday)(e),isSameMonth:i.i(n.isSameMonth)(e,t.show),isFuture:i.i(n.isFuture)(e)}}),a=[],s=0;s<e.length;s+=7)a.push(e.slice(s,s+7));return a},startOfCalendar:function(){return i.i(n.startOfWeek)(i.i(n.startOfMonth)(this.show))},endOfCalendar:function(){return i.i(n.endOfWeek)(i.i(n.lastDayOfMonth)(this.show))},reachTheStart:function(){return i.i(n.isSameMonth)(this.show,this.firstMonthInTimeline)},reachTheEnd:function(){return i.i(n.isThisMonth)(this.show)}}),methods:s()({},i.i(r.e)(["setSelectedDate","setSelectedPhoto"]),{today:function(){this.setSelectedDate(new Date),this.$emit("close")},prior:function(){this.reachTheStart||(this.show=i.i(n.subMonths)(this.show,1))},next:function(){this.reachTheEnd||(this.show=i.i(n.addMonths)(this.show,1))},click:function(t){t.photo?this.setSelectedPhoto(t.photo):this.setSelectedDate(t.day),this.$emit("close")},touchStart:function(t){this.startPageX=t.mp.changedTouches[0].pageX},touchEnd:function(t){var e=this.startPageX-t.mp.changedTouches[0].pageX;e>150?this.prior():e<-150&&this.next()}})}},rG9a:function(t,e,i){"use strict";var a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"calendar-mask",attrs:{eventid:"4"},on:{touchstart:t.touchStart,touchend:t.touchEnd}},[i("div",{staticClass:"calendar-wrapper"},[i("div",{staticClass:"top"},[i("span",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),i("span",{staticClass:"spacer"}),t._v(" "),i("img",{staticClass:"icon",attrs:{src:"/static/icons/today.png",eventid:"0"},on:{click:t.today}}),t._v(" "),i("span",{staticClass:"arrow -left",class:{"-disable":t.reachTheStart},attrs:{eventid:"1"},on:{click:t.prior}}),t._v(" "),i("span",{staticClass:"arrow -right",class:{"-disable":t.reachTheEnd},attrs:{eventid:"2"},on:{click:t.next}})]),t._v(" "),t._m(0),t._v(" "),t._l(t.dayChunks,function(e,a){return i("div",{key:a,staticClass:"row"},t._l(e,function(e,s){return i("div",{key:s,staticClass:"day",class:{"-other":!e.isSameMonth,"-select":e.isSelect,"-today":e.isToday,"-mark":!!e.photo,"-future":e.isFuture},attrs:{eventid:"3-"+a+"-"+s},on:{click:function(i){!e.isFuture&&t.click(e)}}},[t._v("\n        "+t._s(e.date)+"\n      ")])}))})],2)])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"week"},[t._v("日")]),t._v(" "),i("div",{staticClass:"week"},[t._v("一")]),t._v(" "),i("div",{staticClass:"week"},[t._v("二")]),t._v(" "),i("div",{staticClass:"week"},[t._v("三")]),t._v(" "),i("div",{staticClass:"week"},[t._v("四")]),t._v(" "),i("div",{staticClass:"week"},[t._v("五")]),t._v(" "),i("div",{staticClass:"week"},[t._v("六")])])}]};e.a=a},tDOj:function(t,e){},uC6Q:function(t,e,i){"use strict";var a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("form",{attrs:{"report-submit":!0}},[i("div",{staticClass:"container",attrs:{eventid:"3"},on:{touchstart:t.touchStart,touchend:t.touchEnd}},[i("div",{staticClass:"btn-row"},[i("div",{staticClass:"arrow-container",attrs:{eventid:"0"},on:{click:t.prior}},[i("span",{staticClass:"arrow -left",class:{"-disable":t.reachTheStart}})]),t._v(" "),i("span",{staticClass:"show-title"},[i("span",{attrs:{eventid:"1"},on:{click:function(e){t.showCalendar=!0}}},[t._v(t._s(t.selectedDate))])]),t._v(" "),i("div",{staticClass:"arrow-container",attrs:{eventid:"2"},on:{click:t.next}},[i("span",{staticClass:"arrow -right",class:{"-disable":t.reachTheEnd}})])]),t._v(" "),t.photo?i("photo",{attrs:{photo:t.photo,mpcomid:"3"}}):t.reachTheEnd?i("a",{staticClass:"empty-photo",attrs:{href:"/pages/photo-edit/main","hover-class":"none"}},[i("ripple",{attrs:{type:"circle",mpcomid:"1"}},[i("big-image",{attrs:{text:"点击发表今日记忆～",src:"/static/picture/camera.png","img-shake":!0,mpcomid:"0"}})],1)],1):i("div",{staticClass:"empty-photo"},[i("big-image",{attrs:{src:"/static/picture/not_photo.jpg",text:"这一天没有上传照片","text-color":"#1c2438",mpcomid:"2"}})],1)],1),t._v(" "),i("div",{class:t.showCalendar?"calendar-visible":"calendar-hidden"},[i("calendar",{attrs:{eventid:"4",mpcomid:"4"},on:{close:function(e){t.showCalendar=!1}}})],1)])},staticRenderFns:[]};e.a=a},zP9Z:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("5nAL"),s=i.n(a),n=i("LlDP");new s.a(n.a).$mount(),e.default={config:{navigationBarTitleText:"今日",backgroundColor:"#f5f5f5"}}}},["zP9Z"]);