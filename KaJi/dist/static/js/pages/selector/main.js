global.webpackJsonp([9],{WaPT:function(e,t){},iPM8:function(e,t,n){"use strict";var s=n("lhpB"),a=n("zXuL");var c=function(e){n("WaPT")},i=n("ybqe")(s.a,a.a,c,"data-v-4488e190",null);t.a=i.exports},lhpB:function(e,t,n){"use strict";var s=n("Xxa5"),a=n.n(s),c=n("exGp"),i=n.n(c),r=n("BO1k"),o=n.n(r),l=n("Dd8w"),d=n.n(l),u=n("NYxO"),f=n("IcnI"),h=n("ZoQJ");t.a={store:f.a,data:function(){return{selectedIds:[]}},computed:d()({},n.i(u.a)({photos:function(e){return e.timeline.photos}}),{selected:function(){var e={},t=!0,n=!1,s=void 0;try{for(var a,c=o()(this.selectedIds);!(t=(a=c.next()).done);t=!0){e[a.value]=!0}}catch(e){n=!0,s=e}finally{try{!t&&c.return&&c.return()}finally{if(n)throw s}}return e}}),methods:d()({},n.i(u.b)(["fetchVideos"]),{onSelect:function(e){this.selectedIds.includes(e)?this.selectedIds=this.selectedIds.filter(function(t){return t!==e}):this.selectedIds.push(e)},onSubmit:function(){var e=this;return i()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.selectedIds.length>=3)){t.next=7;break}return t.next=3,n.i(h.g)("是否生成视频?");case 3:if(!t.sent){t.next=5;break}e.generate();case 5:t.next=8;break;case 7:n.i(h.h)("还需要选择"+(3-e.selectedIds.length)+"张照片!");case 8:case"end":return t.stop()}},t,e)}))()},generate:function(){var e=this;return i()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,wx.showLoading({title:"正在生成..."}),t.next=4,n.i(h.a)("videos","POST",{ids:e.selectedIds});case 4:return e.fetchVideos(),e.selectedIds=[],wx.hideLoading(),t.next=9,n.i(h.g)("是否跳转到视频列表查看","视频生成完毕");case 9:if(!t.sent){t.next=11;break}n.i(h.m)("/pages/video-list/main");case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}},t,e,[[0,13]])}))()}})}},mKfv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("5nAL"),a=n.n(s),c=n("iPM8");new a.a(c.a).$mount(),t.default={config:{navigationBarTitleText:"视频生成",backgroundColor:"#2d8cf0"}}},zXuL:function(e,t,n){"use strict";var s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"selector"},[e._l(e.photos,function(t,s){return n("div",{key:t.id,staticClass:"item"},[n("div",{staticClass:"thumbnail",class:{selected:e.selected[t.id]},attrs:{eventid:"0-"+s},on:{click:function(n){e.onSelect(t.id)}}},[n("img",{staticClass:"img",attrs:{src:t.photo_url,mode:"aspectFill"}})])])}),e._v(" "),e.selectedIds.length>0?n("footer",{class:{"-warn":e.selectedIds.length<3}},[e.selectedIds.length<3?n("span",[e._v("还需要选择 "+e._s(3-e.selectedIds.length)+" 张照片")]):n("span",[e._v("已选择 "+e._s(e.selectedIds.length)+" 张照片")]),e._v(" "),n("span",{staticClass:"spacer"}),e._v(" "),e.selectedIds.length>=3?n("span",{staticClass:"generate-btn",attrs:{eventid:"1"},on:{click:e.onSubmit}},[e._v("生成视频")]):e._e()]):e._e()],2)},staticRenderFns:[]};t.a=s}},["mKfv"]);